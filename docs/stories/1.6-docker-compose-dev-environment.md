# Story 1.6: Docker Compose 本地开发环境

## Story

```yaml
Story:
  id: 1.6
  title: Docker Compose 本地开发环境
  tier: standard
  status: Done
  mode: plan
  repository: monolith
  epic: 1 - 项目基础设施搭建
  priority: 高
  estimated_complexity: S → 实际 M（6 Dockerfiles + 环境配置）
```

## Epic Context

**Epic**: 1 - 项目基础设施搭建

完成 Monorepo 脚手架、微服务框架、前端工程、数据库、容器化等技术基础设施搭建。

**Story 交付目标**: 编写完整的 docker-compose.yml，支持一键启动 MySQL、Redis、Nacos 及全部微服务和前端项目。

## Acceptance Criteria

> ⚠️ Epic YAML 使用旧版 AC 格式（字符串数组）。以下为增强渲染。

### AC1: docker-compose up 可一键启动所有服务

**Scenario**
```gherkin
GIVEN 开发者已安装 Docker 24.x 和 Docker Compose
WHEN 在项目根目录执行 docker-compose up --build
THEN
  - 基础设施容器启动成功: MySQL 8.0, Redis 7, Nacos 2.3.2
  - 4 个后端服务容器启动成功: gateway(:8080), core-service(:8081), content-service(:8082), file-service(:8083)
  - 2 个前端服务容器启动成功: portal(:3000), admin(:3001)
  - 所有容器均无启动报错
  - 各服务的 /actuator/health 端点返回 UP（后端）
```

**Business Rules**
| ID | Rule |
|----|------|
| BR-1.1 | 每个后端服务需要独立的 Dockerfile（多阶段构建: Maven build → JRE runtime）|
| BR-1.2 | 每个前端服务需要独立的 Dockerfile（多阶段构建: Node build → Nginx/Node runtime）|
| BR-1.3 | 后端 Dockerfile 构建上下文为 `./backend/`（需访问父 POM 和 common 模块）|
| BR-1.4 | Docker 基础镜像: JDK 21 → `eclipse-temurin:21-jdk` (build), `eclipse-temurin:21-jre` (runtime) [→ docs/architecture/tech-stack.md] |
| BR-1.5 | 前端 Portal: Nuxt 3 SSR 模式需 Node.js runtime（非 Nginx 静态）|
| BR-1.6 | 前端 Admin: Vite 构建 + Nginx 静态服务 |
| BR-1.7 | 服务启动顺序: 基础设施(MySQL/Redis/Nacos) → 后端服务 → 前端服务 [→ docker-compose depends_on] |

**Error Handling**
| Scenario | Code | Message | Action |
|----------|------|---------|--------|
| Maven 构建失败 | - | BUILD FAILURE | 检查 pom.xml 依赖和 JDK 版本 |
| npm install 失败 | - | ERR! | 检查 package.json 和网络 |
| 端口冲突 | - | Port already in use | 停止占用端口的进程或修改 .env |
| 镜像拉取超时 | - | Pull timeout | 配置 Docker 镜像加速器 |

---

### AC2: 各服务间网络互通、服务发现正常

**Scenario**
```gherkin
GIVEN 所有容器通过 docker-compose up 启动完成
WHEN 后端服务尝试互相通信
THEN
  - 各后端服务可通过容器名称（mysql, redis, nacos）访问基础设施
  - 各后端服务注册到 Nacos 注册中心
  - Gateway 可通过 Nacos 服务发现将请求路由到各后端服务
  - 前端 Portal 可通过 Gateway 访问后端 API
  - docker-compose 使用默认 bridge 网络，所有服务在同一网络内
```

**Business Rules**
| ID | Rule |
|----|------|
| BR-2.1 | docker-compose 环境变量覆盖各服务的主机地址: `NACOS_ADDR=nacos:8848`、MySQL host → `mysql`、Redis host → `redis` |
| BR-2.2 | 后端 application.yml 中的 datasource URL 需支持环境变量覆盖（通过 `SPRING_DATASOURCE_URL` 环境变量）|
| BR-2.3 | Redis host 需支持环境变量覆盖（通过 `SPRING_DATA_REDIS_HOST` 环境变量）|
| BR-2.4 | Nacos server-addr 已支持 `${NACOS_ADDR:127.0.0.1:8848}` [→ bootstrap.yml] |
| BR-2.5 | Gateway 路由已配置: `/api/core/**` → core-service, `/api/content/**` → content-service, `/api/file/**` → file-service [→ gateway/application.yml] |

**Error Handling**
| Scenario | Code | Message | Action |
|----------|------|---------|--------|
| Nacos 未就绪 | - | Connection refused | depends_on + healthcheck 确保启动顺序 |
| 服务名无法解析 | - | Unknown host | 确认所有容器在同一 Docker 网络 |
| MySQL 连接被拒 | - | Access denied | 检查 MYSQL_ROOT_PASSWORD 环境变量一致性 |

---

### AC3: 数据卷持久化配置正确

**Scenario**
```gherkin
GIVEN docker-compose 定义了命名数据卷
WHEN 执行 docker-compose down 后再 docker-compose up
THEN
  - MySQL 数据（表结构、数据）在重启后保留
  - Redis 数据在重启后保留（RDB 持久化）
  - Nacos 配置数据在重启后保留
  - 命名卷可通过 docker volume ls 查看
  - docker-compose down -v 可清除所有数据卷（完全重置）
```

**Business Rules**
| ID | Rule |
|----|------|
| BR-3.1 | MySQL 数据卷: `mysql-data:/var/lib/mysql` [已配置] |
| BR-3.2 | Redis 数据卷: `redis-data:/data` [已配置] |
| BR-3.3 | Nacos 数据卷: `nacos-data:/home/nacos/data`（新增，确保配置持久化）|
| BR-3.4 | 使用 Docker 命名卷（非绑定挂载），便于管理和清理 |

**Error Handling**
| Scenario | Code | Message | Action |
|----------|------|---------|--------|
| 卷权限错误 | - | Permission denied | 检查容器内用户权限 |
| 磁盘空间不足 | - | No space left | 清理无用卷 docker volume prune |

---

### AC4: 包含 .env.example 环境变量模板

**Scenario**
```gherkin
GIVEN 开发者首次克隆项目
WHEN 查看项目根目录
THEN
  - 存在 .env.example 文件，列出所有可配置的环境变量
  - 每个变量有默认值和注释说明
  - 开发者复制 .env.example 为 .env 即可使用
  - .env 已添加到 .gitignore（不提交敏感信息）
```

**Business Rules**
| ID | Rule |
|----|------|
| BR-4.1 | 必须包含: MYSQL_ROOT_PASSWORD, 各服务端口, Nacos 地址等核心变量 |
| BR-4.2 | 每个变量需有注释说明其用途 |
| BR-4.3 | 默认值适用于本地开发（与 docker-compose 和 application.yml 默认值一致）|
| BR-4.4 | .env 文件必须在 .gitignore 中（不提交到仓库）|

**Error Handling**
| Scenario | Code | Message | Action |
|----------|------|---------|--------|
| .env 文件不存在 | - | docker-compose 使用默认值 | 变量均有默认值，不影响启动 |

---

## Tasks / Subtasks

## Infrastructure Tasks (Shared)

- [x] **T0: 环境准备** `[ALL ACs]`
  - [x] 验证当前 docker-compose.yml、application.yml、bootstrap.yml 的配置状态
  - [x] 确认 .gitignore 已包含 `.env` 条目

## Feature Implementation Tasks

### AC1: 一键启动

- [x] **T1: 创建后端服务 Dockerfiles** `[AC1]`
  - [x] 创建 `backend/gateway/Dockerfile`：多阶段构建（Maven build → JRE 21 runtime）
  - [x] 创建 `backend/core-service/Dockerfile`：多阶段构建（含 common 依赖）
  - [x] 创建 `backend/content-service/Dockerfile`：多阶段构建（含 common 依赖）
  - [x] 创建 `backend/file-service/Dockerfile`：多阶段构建（含 common 依赖）
  - [x] 更新 docker-compose.yml 后端服务 build context 为 `./backend/`，指定 `dockerfile` 路径

- [x] **T2: 创建前端服务 Dockerfiles** `[AC1]`
  - [x] 创建 `frontend/portal/Dockerfile`：多阶段构建（Node build → Node runtime，SSR 模式）
  - [x] 创建 `frontend/admin/Dockerfile`：多阶段构建（Node build → Nginx 静态服务）
  - [x] 创建 `frontend/admin/nginx.conf`：Nginx 配置（SPA history mode fallback + API 代理）

### AC2: 网络互通与服务发现

- [x] **T3: 配置 Docker 网络和环境变量覆盖** `[AC2]`
  - [x] 更新 docker-compose.yml：各后端服务添加 `NACOS_ADDR=nacos:8848` 环境变量
  - [x] 更新 docker-compose.yml：各后端服务添加 `SPRING_DATASOURCE_URL` 环境变量（替换 localhost → mysql）
  - [x] 更新 docker-compose.yml：core-service/content-service 添加 `SPRING_DATA_REDIS_HOST=redis` 环境变量
  - [x] 更新 docker-compose.yml：Nacos 添加 healthcheck
  - [x] 更新 docker-compose.yml：gateway depends_on nacos 使用 service_healthy 条件
  - [x] 验证所有环境变量与 application.yml/bootstrap.yml 默认值兼容

### AC3: 数据持久化

- [x] **T4: 完善数据卷配置** `[AC3]`
  - [x] 更新 docker-compose.yml：添加 Nacos 数据卷 `nacos-data`
  - [x] 验证所有命名卷在 volumes 顶级键中声明

### AC4: 环境变量模板

- [x] **T5: 创建 .env.example** `[AC4]`
  - [x] 创建 `.env.example`：列出所有环境变量（含注释和默认值）
  - [x] 验证 `.env` 在 `.gitignore` 中

## Integration & Verification Tasks

- [x] **T6: 集成验证** `[ALL ACs]`
  - [x] docker-compose config 语法验证（环境无 Docker，通过代码审查验证）
  - [x] Dockerfile 语法和构建逻辑验证
  - [x] 环境变量引用一致性检查
  - [x] Deliverable Bindings 验证：8/8 通过

- [x] **T7: 最终验证** `[ALL ACs]`
  - [x] 所有文件结构完整（8 新文件 + 1 修改文件）
  - [x] Dev Log 完成
  - [x] Status → Review

## AC Coverage Matrix

| Task | AC1 | AC2 | AC3 | AC4 |
|------|:---:|:---:|:---:|:---:|
| T0: 环境准备 | ✓ | ✓ | ✓ | ✓ |
| T1: 后端 Dockerfiles | ✓ |   |   |   |
| T2: 前端 Dockerfiles | ✓ |   |   |   |
| T3: 网络/环境变量 |   | ✓ |   |   |
| T4: 数据卷 |   |   | ✓ |   |
| T5: .env.example |   |   |   | ✓ |
| T6: Integration | ✓ | ✓ | ✓ | ✓ |
| T7: Final | ✓ | ✓ | ✓ | ✓ |

---

## Dev Notes

### Technical Constraints

1. **Maven 多模块构建**: 后端 Dockerfile 的构建上下文必须设为 `./backend/`，因为各子模块依赖父 POM 和 common 模块
2. **JDK 21**: 后端使用 `eclipse-temurin:21-jdk` (build) 和 `eclipse-temurin:21-jre` (runtime)
3. **Nuxt 3 SSR**: Portal 需要 Node.js 运行时而非 Nginx 静态服务，需在容器内运行 `node .output/server/index.mjs`
4. **Admin SPA**: 管理后台是纯 SPA，使用 Nginx 静态服务 + history mode fallback
5. **Spring Boot 环境变量覆盖**: Spring Boot 支持 `SPRING_DATASOURCE_URL`、`SPRING_DATA_REDIS_HOST` 等环境变量自动映射到 application.yml 属性
6. **Nacos 地址**: 各服务 bootstrap.yml 已使用 `${NACOS_ADDR:127.0.0.1:8848}`，Docker 中通过环境变量覆盖为 `nacos:8848`
7. **Docker Compose 默认网络**: 所有服务自动在同一 bridge 网络内，可通过服务名互相访问，无需额外定义网络

### Accumulated Context (From Previous Stories)

| Resource Type | Name | Source Story | Action | Key Info |
|--------------|------|--------------|--------|----------|
| Config | docker-compose.yml | 1.1, 1.5 | EXTEND | 已有所有服务定义、MySQL/Redis healthcheck、init 卷、depends_on 条件 |
| Config | backend/*/bootstrap.yml | 1.2 | REUSE | 已含 `${NACOS_ADDR:127.0.0.1:8848}` |
| Config | backend/*/application.yml | 1.2, 1.5 | REUSE | 已含 datasource(localhost:3306)、Redis(localhost:6379)、Flyway、MyBatis-Plus |
| Config | backend/gateway/application.yml | 1.2 | REUSE | 已含路由: /api/core/**, /api/content/**, /api/file/** |
| Config | backend/pom.xml | 1.2, 1.5 | REUSE | Maven 父工程含所有依赖版本管理 |
| File | docker/mysql/init/01-create-databases.sql | 1.5 | REUSE | 创建 edu_core/edu_content/edu_file 数据库 |
| Config | .gitignore | 1.1 | EXTEND | 需确认包含 .env |

### File Locations

**新增文件**:
```
backend/gateway/Dockerfile                     # Gateway 多阶段构建
backend/core-service/Dockerfile                # Core Service 多阶段构建
backend/content-service/Dockerfile             # Content Service 多阶段构建
backend/file-service/Dockerfile                # File Service 多阶段构建
frontend/portal/Dockerfile                     # Portal Nuxt 3 SSR 构建
frontend/admin/Dockerfile                      # Admin SPA 构建
frontend/admin/nginx.conf                      # Admin Nginx 配置
.env.example                                   # 环境变量模板
```

**修改文件**:
```
docker-compose.yml                             # build context/dockerfile、环境变量、Nacos healthcheck、nacos-data 卷
.gitignore                                     # 确认 .env 条目（如已有则无需修改）
```

### Deliverable Bindings

> **SM**: Define binding for each new code unit. Dev Gate will verify these.
> **Dev**: Ensure all bindings are implemented before self-review.

```yaml
deliverable_bindings:
  # Backend Dockerfiles
  - deliverable: "backend/gateway/Dockerfile"
    consumer: "docker-compose.yml"
    binding_type: config_read
    verify: "gateway.*Dockerfile"
  - deliverable: "backend/core-service/Dockerfile"
    consumer: "docker-compose.yml"
    binding_type: config_read
    verify: "core-service.*Dockerfile"
  - deliverable: "backend/content-service/Dockerfile"
    consumer: "docker-compose.yml"
    binding_type: config_read
    verify: "content-service.*Dockerfile"
  - deliverable: "backend/file-service/Dockerfile"
    consumer: "docker-compose.yml"
    binding_type: config_read
    verify: "file-service.*Dockerfile"

  # Frontend Dockerfiles
  - deliverable: "frontend/portal/Dockerfile"
    consumer: "docker-compose.yml"
    binding_type: config_read
    verify: "portal.*Dockerfile|frontend/portal"
  - deliverable: "frontend/admin/Dockerfile"
    consumer: "docker-compose.yml"
    binding_type: config_read
    verify: "admin.*Dockerfile|frontend/admin"
  - deliverable: "frontend/admin/nginx.conf"
    consumer: "frontend/admin/Dockerfile"
    binding_type: config_read
    verify: "nginx\\.conf"

  # Environment template
  - deliverable: ".env.example"
    consumer: "end_user"
    binding_type: config_read
    verify: "MYSQL_ROOT_PASSWORD"
```

**Binding Status**: ✅ Verified (8/8 PASS)

### Testing Requirements

1. **docker-compose config 验证**: 执行 `docker-compose config` 确认 YAML 语法无误
2. **Dockerfile 语法验证**: 每个 Dockerfile 的 FROM/COPY/RUN 指令逻辑正确
3. **环境变量一致性**: docker-compose.yml 中的环境变量与 application.yml/bootstrap.yml 默认值兼容
4. **Build context 验证**: 后端 Dockerfile 能访问 parent pom.xml 和 common 模块
5. **端口映射验证**: 所有端口映射与服务配置一致（8080/8081/8082/8083/3000/3001）
6. **数据卷声明验证**: volumes 顶级键包含 mysql-data、redis-data、nacos-data

---

## AC Traceability Matrix

> **Dev**: Fill this section BEFORE self-review. Every AC needs evidence.
> **QA**: Verify each entry during AC Coverage Verification.

### AC1: 一键启动

```yaml
ac_id: AC1
code_locations:
  - "backend/gateway/Dockerfile"
  - "backend/core-service/Dockerfile"
  - "backend/content-service/Dockerfile"
  - "backend/file-service/Dockerfile"
  - "frontend/portal/Dockerfile"
  - "frontend/admin/Dockerfile"
  - "frontend/admin/nginx.conf"
  - "docker-compose.yml (build context + dockerfile)"
test_locations:
  - "代码审查验证：多阶段构建逻辑正确"
  - "Deliverable Bindings 验证: 8/8 PASS"
verification_type: code_review
aspects_covered:
  main_scenario: true
  business_rules: true
  data_validation: true
  error_handling: true
notes: "4 后端 Dockerfile (eclipse-temurin:21-jdk/jre) + 2 前端 Dockerfile (Node/Nginx)。Maven 构建上下文 ./backend/。环境无 Docker，通过代码审查验证。"
```

### AC2: 网络互通

```yaml
ac_id: AC2
code_locations:
  - "docker-compose.yml (environment: NACOS_ADDR, SPRING_DATASOURCE_URL, SPRING_DATA_REDIS_HOST)"
  - "docker-compose.yml (nacos healthcheck)"
  - "docker-compose.yml (depends_on service_healthy)"
  - "frontend/admin/nginx.conf (proxy_pass gateway:8080)"
test_locations:
  - "代码审查验证：环境变量与 application.yml/bootstrap.yml 默认值兼容"
  - "代码审查验证：SPRING_DATASOURCE_URL 正确覆盖 localhost → mysql"
verification_type: code_review
aspects_covered:
  main_scenario: true
  business_rules: true
  data_validation: true
  error_handling: true
notes: "Spring Boot 环境变量自动映射。所有后端服务 depends_on nacos service_healthy。Nginx API 代理到 gateway:8080。"
```

### AC3: 数据持久化

```yaml
ac_id: AC3
code_locations:
  - "docker-compose.yml (volumes: mysql-data, redis-data, nacos-data)"
  - "docker-compose.yml (nacos-data:/home/nacos/data)"
test_locations:
  - "代码审查验证：3 个命名卷在 volumes 顶级键声明"
verification_type: code_review
aspects_covered:
  main_scenario: true
  business_rules: true
  data_validation: true
  error_handling: true
notes: "mysql-data(已有) + redis-data(已有) + nacos-data(新增)。使用命名卷，docker-compose down -v 可清除。"
```

### AC4: 环境变量模板

```yaml
ac_id: AC4
code_locations:
  - ".env.example"
  - ".gitignore (.env 条目)"
test_locations:
  - "代码审查验证：11 个变量均有注释和默认值"
  - "代码审查验证：.gitignore 已包含 .env"
verification_type: code_review
aspects_covered:
  main_scenario: true
  business_rules: true
  data_validation: true
  error_handling: true
notes: "所有变量默认值与 docker-compose.yml 一致。.env 已在 .gitignore（Story 1.1 已配置）。"
```

---

### Traceability Summary

| AC | Code Location | Test Location | Type | Status |
|----|---------------|---------------|------|--------|
| AC1 | 6 Dockerfiles + nginx.conf + docker-compose.yml | 代码审查 + Bindings 8/8 | code_review | ✅ |
| AC2 | docker-compose.yml (env vars + healthcheck + depends_on) | 代码审查 | code_review | ✅ |
| AC3 | docker-compose.yml (3 命名卷) | 代码审查 | code_review | ✅ |
| AC4 | .env.example + .gitignore | 代码审查 | code_review | ✅ |

**Legend**: ✅ Verified | ⏳ Pending | ❌ Missing

---

## Dev Agent Record

### Agent Model Used
Claude Opus 4.6

### Implementation Summary
创建完整的 Docker 容器化开发环境：6 个 Dockerfile（4 后端多阶段 Maven→JRE 构建 + 1 前端 Nuxt SSR + 1 前端 Nginx SPA）、Admin Nginx 配置（SPA fallback + API 代理）、docker-compose.yml 全面更新（构建上下文、Spring Boot 环境变量覆盖、Nacos 健康检查、nacos-data 卷、端口变量化）、.env.example 环境变量模板。

### Database Changes (Structured)
```yaml
{}  # No database changes in this story
```

### API Endpoints Created (Structured)
```yaml
[]  # No API endpoints in this story
```

### Shared Models Created (Structured)
```yaml
{}  # No shared models in this story
```

### File List

**新增文件（8 个）**:
| # | File | Description |
|---|------|-------------|
| 1 | `backend/gateway/Dockerfile` | Gateway 多阶段构建（Maven → JRE 21），端口 8080 |
| 2 | `backend/core-service/Dockerfile` | Core Service 多阶段构建（含 common），端口 8081 |
| 3 | `backend/content-service/Dockerfile` | Content Service 多阶段构建（含 common），端口 8082 |
| 4 | `backend/file-service/Dockerfile` | File Service 多阶段构建（含 common），端口 8083 |
| 5 | `frontend/portal/Dockerfile` | Portal Nuxt 3 SSR（Node build → Node runtime），端口 3000 |
| 6 | `frontend/admin/Dockerfile` | Admin SPA（Node build → Nginx 静态），端口 3001 |
| 7 | `frontend/admin/nginx.conf` | Nginx 配置：SPA history fallback + API 代理到 gateway:8080 |
| 8 | `.env.example` | 环境变量模板：11 个变量，含注释和默认值 |

**修改文件（1 个）**:
| # | File | Changes |
|---|------|---------|
| 1 | `docker-compose.yml` | 构建上下文、环境变量覆盖、Nacos healthcheck、nacos-data 卷、端口变量化、前端 depends_on gateway |

### Dev Log Reference
`docs/dev/logs/1.6-dev-log.md`

### Open Issues
- Docker 端到端启动验证需 Docker 环境（当前环境无 Docker）
- Maven 构建验证需 JDK 21 环境（当前环境无 Java）
- Portal Nuxt build 验证需 Node.js 环境（需在 Docker 中执行）

---

## QA Results

### Review Round 1 — 2026-02-09

**Reviewer**: JW (QA Engineer)
**Gate Result**: ✅ PASS
**Risk Level**: MEDIUM

#### Verification Summary

| Category | Result |
|----------|--------|
| File Existence | 8/8 new files (100%) |
| Modified Files | 1/1 (docker-compose.yml) |
| Backend Dockerfiles | 4/4 PASS (multi-stage JDK→JRE, consistent) |
| Frontend Dockerfiles | 2/2 PASS (portal Node SSR + admin Nginx SPA) |
| Nginx Config | PASS (SPA fallback + API proxy) |
| docker-compose.yml | 9 services, env vars, healthchecks, depends_on, 3 volumes |
| .env.example | 11 vars with comments and defaults |
| .gitignore | .env present |
| Deliverable Bindings | 8/8 (100%) |
| Task Checkboxes | 35/35 (100%) |
| AC Coverage | 4/4 (100%) |

#### AC Verification Details

| AC | Status | Method | Evidence |
|----|--------|--------|----------|
| AC1: 一键启动 | ✅ VERIFIED | code review | 6 Dockerfiles (4 JDK→JRE + 1 Node SSR + 1 Nginx SPA); build context correct |
| AC2: 网络互通 | ✅ VERIFIED | code review | NACOS_ADDR/DATASOURCE_URL/REDIS_HOST env vars; Nacos healthcheck; depends_on; nginx proxy |
| AC3: 数据持久化 | ✅ VERIFIED | code review | 3 命名卷 (mysql-data, redis-data, nacos-data) 声明并挂载 |
| AC4: 环境变量模板 | ✅ VERIFIED | code review | .env.example 11 vars + 注释 + 默认值; .env in .gitignore |

#### Info Notes

- 后端 Dockerfiles 以 root 运行（开发环境标准，生产环境建议添加非 root 用户）
- Docker 运行时验证需 Docker 环境（当前环境无 Docker）

#### Issues

| Severity | Count |
|----------|-------|
| Critical | 0 |
| High | 0 |
| Medium | 0 |
| Low | 0 |

**Gate File**: `docs/qa/gates/1.6-docker-compose-dev-environment.yml`

---

## Change Log

| Date | Agent | Status Transition | Details/Link |
|------|-------|-------------------|--------------|
| 2026-02-09 | SM | Created → Draft | Story created (tier upgraded S→standard due to 6 Dockerfiles + env config) |
| 2026-02-09 | SM | Draft → Approved | Gate PASS 10.0/10; Architect NOT_REQUIRED; Test Simple; Direct-to-dev |
| 2026-02-09 | Dev (Opus 4.6) | Approved → InProgress | 开始开发：8 新文件 + 1 修改文件 |
| 2026-02-09 | Dev (Opus 4.6) | InProgress → Review | 实现完成：6 Dockerfiles + nginx.conf + .env.example + docker-compose 全面更新。Bindings 8/8 PASS |
| 2026-02-09 | QA (JW) | Review → Done | Gate PASS. 8/8 files, 35/35 checkboxes, 8/8 bindings, 4/4 AC, 0 issues. |
