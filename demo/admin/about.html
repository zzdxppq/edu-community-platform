<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>é¡¹ç›®ä»‹ç»ç®¡ç† - ç®¡ç†åå°</title>
  <link rel="stylesheet" href="../css/styles.css">
  <link rel="stylesheet" href="../css/admin-modal.css">
  <!-- WangEditor 5.x æ ·å¼ -->
  <link href="https://unpkg.com/@wangeditor/editor@latest/dist/css/style.css" rel="stylesheet">
  <style>
    .section-card {
      background: white;
      border-radius: 12px;
      box-shadow: var(--shadow-sm);
      margin-bottom: 24px;
    }
    .section-header {
      padding: 20px 24px;
      border-bottom: 1px solid var(--neutral-200);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .section-title {
      font-size: 16px;
      font-weight: 600;
      color: var(--neutral-800);
    }
    .section-body {
      padding: 24px;
    }
    /* ç¼–è¾‘å™¨å®¹å™¨æ ·å¼ */
    .editor-container {
      border: 1px solid var(--neutral-300);
      border-radius: 8px;
      overflow: hidden;
      z-index: 100;
    }
    .editor-toolbar {
      border-bottom: 1px solid var(--neutral-200);
      background: var(--neutral-50);
    }
    .editor-content {
      height: 500px;
      overflow-y: auto;
      background: white;
    }
    /* è¦†ç›–ç¼–è¾‘å™¨é»˜è®¤æ ·å¼ */
    .w-e-toolbar {
      background: var(--neutral-50) !important;
      border-bottom: 1px solid var(--neutral-200) !important;
    }
    .w-e-text-container {
      background: white !important;
    }
    .w-e-text-container p {
      margin: 0 0 1em 0;
    }
  </style>
</head>
<body>
  <div class="admin-wrapper">
    <!-- Sidebar -->
    <aside class="admin-sidebar">
      <div class="admin-logo">
        <div class="admin-logo-icon">è±«</div>
        <div class="admin-logo-text">åŸä¹¡å­¦æ ¡å…±åŒä½“<br>ç®¡ç†åå°</div>
      </div>

      <nav class="admin-menu">
        <div class="admin-menu-group">
          <a href="index.html" class="admin-menu-item">
            <span class="admin-menu-icon">ğŸ“Š</span>
            å·¥ä½œå°
          </a>
        </div>

        <div class="admin-menu-group">
          <div class="admin-menu-title">ç”¨æˆ·ç®¡ç†</div>
          <a href="users.html" class="admin-menu-item">
            <span class="admin-menu-icon">ğŸ‘¥</span>
            å­¦æ ¡ç®¡ç†å‘˜
          </a>
        </div>

        <div class="admin-menu-group">
          <div class="admin-menu-title">å†…å®¹ç®¡ç†</div>
          <a href="about.html" class="admin-menu-item active">
            <span class="admin-menu-icon">ğŸ“–</span>
            é¡¹ç›®ä»‹ç»
          </a>
          <a href="news.html" class="admin-menu-item">
            <span class="admin-menu-icon">ğŸ“°</span>
            æ–°é—»èµ„è®¯
          </a>
          <a href="policy.html" class="admin-menu-item">
            <span class="admin-menu-icon">ğŸ“‹</span>
            æ”¿ç­–æ–‡ä»¶
          </a>
          <a href="resources.html" class="admin-menu-item">
            <span class="admin-menu-icon">ğŸ“š</span>
            èµ„æºå…±äº«
          </a>
        </div>

        <div class="admin-menu-group">
          <div class="admin-menu-title">ç¤ºèŒƒæ ¡ç®¡ç†</div>
          <a href="schools.html" class="admin-menu-item">
            <span class="admin-menu-icon">ğŸ«</span>
            ç¤ºèŒƒæ ¡åˆ—è¡¨
          </a>
        </div>

        <div class="admin-menu-group">
          <div class="admin-menu-title">ç³»ç»Ÿè®¾ç½®</div>
          <a href="navigation.html" class="admin-menu-item">
            <span class="admin-menu-icon">ğŸ§­</span>
            å¯¼èˆªç®¡ç†
          </a>
          <a href="settings.html" class="admin-menu-item">
            <span class="admin-menu-icon">âš™ï¸</span>
            åŸºç¡€é…ç½®
          </a>
        </div>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="admin-main">
      <!-- Header -->
      <header class="admin-header">
        <div class="admin-breadcrumb">
          é¦–é¡µ / å†…å®¹ç®¡ç† / é¡¹ç›®ä»‹ç»
        </div>
        <div class="admin-user">
          <span style="font-size: 14px; color: var(--neutral-600);">æ¬¢è¿ï¼Œè¶…çº§ç®¡ç†å‘˜</span>
          <div class="admin-avatar">ç®¡</div>
          <a href="../pages/admin-login.html" style="font-size: 14px; color: var(--accent-600);">é€€å‡º</a>
        </div>
      </header>

      <!-- Content -->
      <div class="admin-content">
        <div class="admin-page-header">
          <h1 class="admin-page-title">é¡¹ç›®ä»‹ç»ç®¡ç†</h1>
          <p class="admin-page-desc">ç¼–è¾‘å’Œç®¡ç†å®˜ç½‘"é¡¹ç›®ä»‹ç»"é¡µé¢çš„å†…å®¹</p>
        </div>

        <!-- Project Name Section -->
        <div class="section-card">
          <div class="section-header">
            <div class="section-title">é¡¹ç›®åç§°</div>
          </div>
          <div class="section-body">
            <div class="form-group" style="margin-bottom: 0;">
              <label class="form-label">é¡¹ç›®åç§° <span style="color: red;">*</span></label>
              <input type="text" class="form-input" id="projectName" value="æ²³å—çœåŸä¹¡å­¦æ ¡å…±åŒä½“å‘å±•å¹³å°" placeholder="è¯·è¾“å…¥é¡¹ç›®åç§°">
            </div>
          </div>
        </div>

        <!-- Project Content Section -->
        <div class="section-card">
          <div class="section-header">
            <div class="section-title">é¡¹ç›®å†…å®¹</div>
          </div>
          <div class="section-body">
            <div class="form-group" style="margin-bottom: 0;">
              <label class="form-label">é¡¹ç›®ä»‹ç»å†…å®¹ <span style="color: red;">*</span></label>
              <p style="font-size: 13px; color: var(--neutral-500); margin-bottom: 12px;">ä½¿ç”¨å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ç¼–è¾‘é¡¹ç›®ä»‹ç»çš„è¯¦ç»†å†…å®¹ï¼Œæ”¯æŒå›¾ç‰‡ã€è¡¨æ ¼ã€é“¾æ¥ç­‰å¤šç§æ ¼å¼</p>
              <div class="editor-container">
                <div id="editorToolbar" class="editor-toolbar"></div>
                <div id="editorContent" class="editor-content"></div>
              </div>
            </div>
          </div>
        </div>

        <!-- Action Buttons -->
        <div style="display: flex; gap: 16px; justify-content: center; margin-top: 32px;">
          <button class="btn btn-outline" style="padding: 12px 32px;" onclick="previewContent()">é¢„è§ˆ</button>
          <button class="btn btn-primary" style="padding: 12px 32px;" onclick="saveContent()">ä¿å­˜</button>
          <button class="btn btn-accent" style="padding: 12px 32px;" onclick="publishContent()">å‘å¸ƒæ›´æ–°</button>
        </div>
      </div>
    </main>
  </div>

  <!-- WangEditor 5.x JavaScript -->
  <script src="https://unpkg.com/@wangeditor/editor@latest/dist/index.js"></script>
  <script>
    const { createEditor, createToolbar } = window.wangEditor;

    let editor = null;

    // åˆå§‹åŒ–ç¼–è¾‘å™¨
    function initEditor() {
      // åˆ›å»ºç¼–è¾‘å™¨
      editor = createEditor({
        selector: '#editorContent',
        html: getDefaultContent(),
        config: {
          placeholder: 'è¯·è¾“å…¥é¡¹ç›®ä»‹ç»å†…å®¹...',
          MENU_CONF: {
            uploadImage: {
              // æ¨¡æ‹Ÿä¸Šä¼ 
              customUpload(file, insertFn) {
                // åˆ›å»ºä¸´æ—¶URLç”¨äºé¢„è§ˆ
                const url = URL.createObjectURL(file);
                insertFn(url, file.name, url);
              }
            }
          }
        }
      });

      // åˆ›å»ºå·¥å…·æ 
      createToolbar({
        editor,
        selector: '#editorToolbar',
        config: {
          toolbarKeys: [
            'headerSelect',
            'bold',
            'italic',
            'underline',
            'through',
            'color',
            'bgColor',
            '|',
            'bulletedList',
            'numberedList',
            'todo',
            '|',
            'justifyLeft',
            'justifyCenter',
            'justifyRight',
            '|',
            'insertLink',
            'uploadImage',
            'insertTable',
            '|',
            'blockquote',
            'divider',
            '|',
            'undo',
            'redo',
            'fullScreen'
          ]
        }
      });
    }

    // è·å–é»˜è®¤å†…å®¹
    function getDefaultContent() {
      return `
        <h2>é¡¹ç›®èƒŒæ™¯</h2>
        <p>ä¸ºæ·±å…¥è´¯å½»å…šçš„äºŒåå¤§ç²¾ç¥å’Œä¹ è¿‘å¹³æ€»ä¹¦è®°å…³äºæ•™è‚²çš„é‡è¦è®ºè¿°ï¼Œè½å®ã€Šä¸­å…±ä¸­å¤® å›½åŠ¡é™¢å…³äºæ·±åŒ–æ•™è‚²æ•™å­¦æ”¹é©å…¨é¢æé«˜ä¹‰åŠ¡æ•™è‚²è´¨é‡çš„æ„è§ã€‹ç­‰æ–‡ä»¶ç²¾ç¥ï¼ŒåŠ å¿«æ¨è¿›å¿åŸŸå†…åŸä¹¡ä¹‰åŠ¡æ•™è‚²ä¸€ä½“åŒ–å‘å±•ï¼Œä¿ƒè¿›æ•™è‚²å…¬å¹³ï¼Œæé«˜æ•™è‚²è´¨é‡ï¼Œæ²³å—çœæ•™è‚²å…å¯åŠ¨äº†åŸä¹¡å­¦æ ¡å…±åŒä½“å»ºè®¾é¡¹ç›®ã€‚</p>
        <p>åŸä¹¡å­¦æ ¡å…±åŒä½“æ˜¯ä»¥ä¼˜è´¨å­¦æ ¡ä¸ºæ ¸å¿ƒï¼Œè”åˆè‹¥å¹²å†œæ‘å­¦æ ¡æˆ–è–„å¼±å­¦æ ¡ï¼Œå»ºç«‹"ç®¡ç†äº’é€šã€å¸ˆèµ„å…±è‚²ã€æ•™ç ”å…±äº«ã€èµ„æºå…±å»ºã€è€ƒè¯„å…±ä¿ƒ"çš„ç´§å¯†å‹æ•™è‚²å…±åŒä½“ï¼Œæ¨åŠ¨åŸä¹¡å­¦æ ¡ååŒå‘å±•ï¼Œä¿ƒè¿›ä¼˜è´¨æ•™è‚²èµ„æºå…±äº«ã€‚</p>

        <h2>å»ºè®¾ç›®æ ‡</h2>
        <p>é€šè¿‡åŸä¹¡å­¦æ ¡å…±åŒä½“å»ºè®¾ï¼ŒåŠ›äº‰å®ç°ä»¥ä¸‹ç›®æ ‡ï¼š</p>
        <ul>
          <li><strong>ç®¡ç†æ°´å¹³æå‡ï¼š</strong>å»ºç«‹åŸä¹¡å­¦æ ¡ä¸€ä½“åŒ–ç®¡ç†æœºåˆ¶ï¼Œæå‡å†œæ‘å­¦æ ¡ç®¡ç†æ°´å¹³</li>
          <li><strong>æ•™å¸ˆä¸“ä¸šå‘å±•ï¼š</strong>ä¿ƒè¿›åŸä¹¡æ•™å¸ˆäº¤æµäº’è®¿ï¼Œæé«˜å†œæ‘æ•™å¸ˆä¸“ä¸šç´ å…»</li>
          <li><strong>æ•™å­¦è´¨é‡æé«˜ï¼š</strong>å…±äº«ä¼˜è´¨æ•™å­¦èµ„æºï¼Œç¼©å°åŸä¹¡æ•™å­¦è´¨é‡å·®è·</li>
          <li><strong>å­¦ç”Ÿå…¨é¢å‘å±•ï¼š</strong>ä¸°å¯Œå†œæ‘å­¦ç”Ÿå­¦ä¹ èµ„æºï¼Œä¿ƒè¿›å­¦ç”Ÿå…¨é¢å‘å±•</li>
        </ul>

        <h2>å®æ–½è·¯å¾„</h2>
        <h3>ä¸€ã€ç»„å»ºå…±åŒä½“</h3>
        <p>ä»¥å¿åŸŸä¸ºå•ä½ï¼Œé´é€‰ä¼˜è´¨å­¦æ ¡ä½œä¸ºæ ¸å¿ƒæ ¡ï¼Œä¸2-5æ‰€å†œæ‘å­¦æ ¡æˆ–è–„å¼±å­¦æ ¡ç»“æˆå…±åŒä½“ã€‚</p>
        <h3>äºŒã€å»ºç«‹æœºåˆ¶</h3>
        <p>åˆ¶å®šå…±åŒä½“ç« ç¨‹ï¼Œæ˜ç¡®æˆå‘˜æ ¡è´£ä»»ä¸åˆ†å·¥ï¼Œå»ºç«‹å®šæœŸäº¤æµã€è”åˆæ•™ç ”ç­‰å·¥ä½œæœºåˆ¶ã€‚</p>
        <h3>ä¸‰ã€æ·±åŒ–åˆä½œ</h3>
        <p>å¼€å±•ç®¡ç†äº’é€šã€æ•™å­¦å…±ç ”ã€å¸ˆèµ„å…±åŸ¹ã€èµ„æºå…±äº«ç­‰å¤šç»´åº¦åˆä½œã€‚</p>
        <h3>å››ã€è€ƒæ ¸è¯„ä¼°</h3>
        <p>å»ºç«‹å…±åŒä½“å‘å±•è¯„ä¼°ä½“ç³»ï¼Œå®šæœŸè€ƒæ ¸å…±åŒä½“å»ºè®¾æˆæ•ˆã€‚</p>
      `;
    }

    function previewContent() {
      window.open('../pages/about.html', '_blank');
    }

    function saveContent() {
      const name = document.getElementById('projectName').value;
      const content = editor ? editor.getHtml() : '';
      const isEmpty = editor ? editor.isEmpty() : true;

      if (!name) {
        alert('è¯·å¡«å†™é¡¹ç›®åç§°');
        return;
      }

      if (isEmpty) {
        alert('è¯·å¡«å†™é¡¹ç›®ä»‹ç»å†…å®¹');
        return;
      }

      showToast('é¡¹ç›®ä»‹ç»ä¿å­˜æˆåŠŸï¼');
    }

    function publishContent() {
      const name = document.getElementById('projectName').value;
      const content = editor ? editor.getHtml() : '';
      const isEmpty = editor ? editor.isEmpty() : true;

      if (!name) {
        alert('è¯·å¡«å†™é¡¹ç›®åç§°');
        return;
      }

      if (isEmpty) {
        alert('è¯·å¡«å†™é¡¹ç›®ä»‹ç»å†…å®¹');
        return;
      }

      if (confirm('ç¡®å®šè¦å‘å¸ƒæ›´æ–°å—ï¼Ÿå‘å¸ƒåå°†ç«‹å³åœ¨å‰å°ç”Ÿæ•ˆã€‚')) {
        showToast('é¡¹ç›®ä»‹ç»å·²å‘å¸ƒæ›´æ–°ï¼');
      }
    }

    function showToast(message) {
      const toast = document.createElement('div');
      toast.className = 'toast';
      toast.textContent = message;
      document.body.appendChild(toast);
      setTimeout(() => toast.classList.add('show'), 10);
      setTimeout(() => {
        toast.classList.remove('show');
        setTimeout(() => toast.remove(), 300);
      }, 2000);
    }

    // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–ç¼–è¾‘å™¨
    document.addEventListener('DOMContentLoaded', function() {
      initEditor();
    });
  </script>
</body>
</html>
