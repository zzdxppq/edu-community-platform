<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>学校管理后台 - 信阳董家河小学中心校</title>
  <link rel="stylesheet" href="../css/styles.css">
  <link rel="stylesheet" href="../css/admin-modal.css">
</head>
<body>
  <div class="admin-wrapper">
    <!-- Sidebar -->
    <aside class="admin-sidebar" style="background: linear-gradient(180deg, #1a3d6e 0%, #2C5AA0 100%);">
      <div class="admin-logo">
        <div class="admin-logo-icon" style="background: #fff;">豫</div>
        <div class="admin-logo-text">信阳董家河小学<br>学校管理后台</div>
      </div>

      <nav class="admin-menu">
        <div class="admin-menu-group">
          <a href="school-admin.html" class="admin-menu-item active">
            <span class="admin-menu-icon">📊</span>
            工作台
          </a>
        </div>

        <div class="admin-menu-group">
          <div class="admin-menu-title">内容管理</div>
          <a href="#" class="admin-menu-item" onclick="showSection('intro')">
            <span class="admin-menu-icon">🏫</span>
            校共体介绍
          </a>
          <a href="#" class="admin-menu-item" onclick="showSection('progress')">
            <span class="admin-menu-icon">📝</span>
            项目进展
          </a>
          <a href="#" class="admin-menu-item" onclick="showSection('report')">
            <span class="admin-menu-icon">📄</span>
            月报管理
          </a>
          <a href="#" class="admin-menu-item" onclick="showSection('resource')">
            <span class="admin-menu-icon">📚</span>
            资源成果
          </a>
        </div>

        <div class="admin-menu-group">
          <div class="admin-menu-title">个人中心</div>
          <a href="#" class="admin-menu-item" onclick="showSection('profile')">
            <span class="admin-menu-icon">👤</span>
            账号设置
          </a>
        </div>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="admin-main">
      <header class="admin-header">
        <div class="admin-breadcrumb">学校管理后台 / 工作台</div>
        <div class="admin-user">
          <span style="font-size: 14px; color: var(--neutral-600);">李老师 (学校管理员)</span>
          <div class="admin-avatar" style="background: var(--accent-600);">李</div>
          <a href="../pages/admin-login.html" style="font-size: 14px; color: var(--accent-600);">退出</a>
        </div>
      </header>

      <div class="admin-content">
        <div class="admin-page-header">
          <h1 class="admin-page-title">信阳董家河小学中心校 - 工作台</h1>
          <p class="admin-page-desc">管理本校共同体建设相关内容</p>
        </div>

        <!-- Stats -->
        <div class="admin-stats">
          <div class="admin-stat-card">
            <div class="admin-stat-title">项目进展</div>
            <div class="admin-stat-value">23</div>
            <div class="admin-stat-change">已发布动态</div>
          </div>
          <div class="admin-stat-card">
            <div class="admin-stat-title">资源成果</div>
            <div class="admin-stat-value">15</div>
            <div class="admin-stat-change">已上传资源</div>
          </div>
          <div class="admin-stat-card">
            <div class="admin-stat-title">月报提交</div>
            <div class="admin-stat-value">12</div>
            <div class="admin-stat-change">累计提交</div>
          </div>
          <div class="admin-stat-card">
            <div class="admin-stat-title">总浏览量</div>
            <div class="admin-stat-value">5,678</div>
            <div class="admin-stat-change">本校内容</div>
          </div>
        </div>

        <!-- Quick Actions -->
        <div class="admin-card" style="margin-bottom: 24px;">
          <div class="admin-card-header">
            <h3 class="admin-card-title">快捷操作</h3>
          </div>
          <div class="admin-card-body" style="display: flex; gap: 16px; flex-wrap: wrap;">
            <button class="btn btn-primary" style="padding: 12px 24px;" onclick="openProgressModal()">
              📝 发布项目进展
            </button>
            <button class="btn btn-accent" style="padding: 12px 24px;" onclick="openResourceModal()">
              📚 上传资源成果
            </button>
            <button class="btn btn-outline" style="padding: 12px 24px;" onclick="openReportModal()">
              📄 提交月报
            </button>
            <button class="btn btn-outline" style="padding: 12px 24px;" onclick="openIntroModal()">
              🏫 编辑校共体介绍
            </button>
          </div>
        </div>

        <!-- Recent Progress -->
        <div class="admin-card">
          <div class="admin-card-header">
            <h3 class="admin-card-title">最近发布的项目进展</h3>
            <button class="btn btn-outline" style="padding: 6px 16px; font-size: 13px;">查看全部</button>
          </div>
          <div class="admin-card-body" style="padding: 0;">
            <table class="admin-table">
              <thead>
                <tr>
                  <th style="width: 50%;">标题</th>
                  <th>发布时间</th>
                  <th>浏览量</th>
                  <th>操作</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>信阳董家河小学与乡村学校开展教学研讨活动</td>
                  <td>2025-03-12</td>
                  <td>856</td>
                  <td class="admin-actions">
                    <button class="admin-btn-sm admin-btn-outline">编辑</button>
                    <button class="admin-btn-sm admin-btn-danger">删除</button>
                  </td>
                </tr>
                <tr>
                  <td>2025年春季学期共同体工作部署会议召开</td>
                  <td>2025-02-28</td>
                  <td>534</td>
                  <td class="admin-actions">
                    <button class="admin-btn-sm admin-btn-outline">编辑</button>
                    <button class="admin-btn-sm admin-btn-danger">删除</button>
                  </td>
                </tr>
                <tr>
                  <td>教师交流轮岗首批10名教师顺利到岗</td>
                  <td>2025-02-15</td>
                  <td>623</td>
                  <td class="admin-actions">
                    <button class="admin-btn-sm admin-btn-outline">编辑</button>
                    <button class="admin-btn-sm admin-btn-danger">删除</button>
                  </td>
                </tr>
                <tr>
                  <td>共同体信息化平台建设项目启动</td>
                  <td>2025-01-20</td>
                  <td>478</td>
                  <td class="admin-actions">
                    <button class="admin-btn-sm admin-btn-outline">编辑</button>
                    <button class="admin-btn-sm admin-btn-danger">删除</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- Monthly Reports -->
        <div class="admin-card" style="margin-top: 24px;">
          <div class="admin-card-header">
            <h3 class="admin-card-title">月报提交记录</h3>
            <button class="btn btn-primary" style="padding: 6px 16px; font-size: 13px;" onclick="openReportModal()">+ 提交月报</button>
          </div>
          <div class="admin-card-body" style="padding: 0;">
            <table class="admin-table">
              <thead>
                <tr>
                  <th>月份</th>
                  <th>提交时间</th>
                  <th>文件</th>
                  <th>状态</th>
                  <th>操作</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>2025年3月</td>
                  <td>-</td>
                  <td>-</td>
                  <td><span class="admin-badge admin-badge-warning">待提交</span></td>
                  <td class="admin-actions">
                    <button class="admin-btn-sm admin-btn-primary">提交</button>
                  </td>
                </tr>
                <tr>
                  <td>2025年2月</td>
                  <td>2025-03-05</td>
                  <td>2025年2月月报.pdf</td>
                  <td><span class="admin-badge admin-badge-success">已提交</span></td>
                  <td class="admin-actions">
                    <button class="admin-btn-sm admin-btn-outline">查看</button>
                    <button class="admin-btn-sm admin-btn-outline">编辑</button>
                  </td>
                </tr>
                <tr>
                  <td>2025年1月</td>
                  <td>2025-02-03</td>
                  <td>2025年1月月报.pdf</td>
                  <td><span class="admin-badge admin-badge-success">已提交</span></td>
                  <td class="admin-actions">
                    <button class="admin-btn-sm admin-btn-outline">查看</button>
                    <button class="admin-btn-sm admin-btn-outline">编辑</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Progress Modal -->
  <div class="modal-overlay" id="progressModal">
    <div class="modal" style="max-width: 700px;">
      <div class="modal-header">
        <h3 class="modal-title">发布项目进展</h3>
        <button class="modal-close" onclick="closeProgressModal()">&times;</button>
      </div>
      <div class="modal-body">
        <form id="progressForm">
          <div class="form-group">
            <label class="form-label">进展标题 <span style="color: red;">*</span></label>
            <input type="text" class="form-input" id="progressTitle" placeholder="请输入进展标题" required>
          </div>
          <div class="form-group">
            <label class="form-label">进展内容 <span style="color: red;">*</span></label>
            <textarea class="form-input" id="progressContent" rows="6" placeholder="请输入详细内容" required></textarea>
          </div>
          <div class="form-group">
            <label class="form-label">配图上传</label>
            <div class="file-upload-area" onclick="document.getElementById('progressImages').click()">
              <input type="file" id="progressImages" style="display: none;" accept="image/*" multiple>
              <div class="file-upload-icon">🖼️</div>
              <div class="file-upload-text">点击上传图片（可多选）</div>
              <div class="file-upload-hint">建议尺寸：800×600，支持 JPG、PNG 格式，最多5张</div>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn btn-outline" onclick="closeProgressModal()">取消</button>
        <button class="btn btn-primary" onclick="saveProgress()">发布</button>
      </div>
    </div>
  </div>

  <!-- Resource Modal -->
  <div class="modal-overlay" id="resourceModal">
    <div class="modal" style="max-width: 700px;">
      <div class="modal-header">
        <h3 class="modal-title">上传资源成果</h3>
        <button class="modal-close" onclick="closeResourceModal()">&times;</button>
      </div>
      <div class="modal-body">
        <form id="resourceForm">
          <div class="form-group">
            <label class="form-label">资源名称 <span style="color: red;">*</span></label>
            <input type="text" class="form-input" id="resourceName" placeholder="请输入资源名称" required>
          </div>
          <div class="form-row" style="display: flex; gap: 16px;">
            <div class="form-group" style="flex: 1;">
              <label class="form-label">资源类型 <span style="color: red;">*</span></label>
              <select class="form-input" id="resourceType" required>
                <option value="">请选择类型</option>
                <option value="教学设计">教学设计</option>
                <option value="课件资源">课件资源</option>
                <option value="教学视频">教学视频</option>
                <option value="研究成果">研究成果</option>
              </select>
            </div>
            <div class="form-group" style="flex: 1;">
              <label class="form-label">学科 <span style="color: red;">*</span></label>
              <select class="form-input" id="resourceSubject" required>
                <option value="">请选择学科</option>
                <option value="语文">语文</option>
                <option value="数学">数学</option>
                <option value="英语">英语</option>
                <option value="科学">科学</option>
                <option value="综合">综合</option>
              </select>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">资源描述</label>
            <textarea class="form-input" id="resourceDesc" rows="3" placeholder="请输入资源描述"></textarea>
          </div>
          <div class="form-group">
            <label class="form-label">资源文件 <span style="color: red;">*</span></label>
            <div class="file-upload-area" onclick="document.getElementById('resourceFile').click()">
              <input type="file" id="resourceFile" style="display: none;" accept=".pdf,.doc,.docx,.ppt,.pptx,.mp4,.zip">
              <div class="file-upload-icon">📁</div>
              <div class="file-upload-text">点击上传文件</div>
              <div class="file-upload-hint">支持 PDF、DOC、PPT、MP4、ZIP 格式，最大 500MB</div>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn btn-outline" onclick="closeResourceModal()">取消</button>
        <button class="btn btn-primary" onclick="saveResource()">上传</button>
      </div>
    </div>
  </div>

  <!-- Report Modal -->
  <div class="modal-overlay" id="reportModal">
    <div class="modal" style="max-width: 600px;">
      <div class="modal-header">
        <h3 class="modal-title">提交月报</h3>
        <button class="modal-close" onclick="closeReportModal()">&times;</button>
      </div>
      <div class="modal-body">
        <form id="reportForm">
          <div class="form-group">
            <label class="form-label">月份 <span style="color: red;">*</span></label>
            <select class="form-input" id="reportMonth" required>
              <option value="">请选择月份</option>
              <option value="2025-03" selected>2025年3月</option>
              <option value="2025-02">2025年2月</option>
              <option value="2025-01">2025年1月</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">月报文件 <span style="color: red;">*</span></label>
            <div class="file-upload-area" onclick="document.getElementById('reportFile').click()">
              <input type="file" id="reportFile" style="display: none;" accept=".pdf,.doc,.docx">
              <div class="file-upload-icon">📄</div>
              <div class="file-upload-text">点击上传月报文件</div>
              <div class="file-upload-hint">支持 PDF、DOC、DOCX 格式</div>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">备注说明</label>
            <textarea class="form-input" id="reportNote" rows="3" placeholder="如有特殊情况请说明"></textarea>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn btn-outline" onclick="closeReportModal()">取消</button>
        <button class="btn btn-primary" onclick="submitReport()">提交</button>
      </div>
    </div>
  </div>

  <!-- Intro Edit Modal -->
  <div class="modal-overlay" id="introModal">
    <div class="modal" style="max-width: 700px;">
      <div class="modal-header">
        <h3 class="modal-title">编辑校共体介绍</h3>
        <button class="modal-close" onclick="closeIntroModal()">&times;</button>
      </div>
      <div class="modal-body">
        <form id="introForm">
          <div class="form-group">
            <label class="form-label">共同体名称</label>
            <input type="text" class="form-input" id="introName" value="信阳董家河小学中心校城乡学校共同体">
          </div>
          <div class="form-group">
            <label class="form-label">共同体简介 <span style="color: red;">*</span></label>
            <textarea class="form-input" id="introContent" rows="6" required>信阳董家河小学中心校城乡学校共同体成立于2024年，是河南省首批城乡学校共同体示范项目之一。共同体以董家河小学为核心校，联合周边5所乡村学校，通过教师交流、资源共享、教研协作等方式，促进城乡教育均衡发展。

共同体围绕"同步课堂、联合教研、教师交流、资源共享"四大核心工作，积极探索城乡教育一体化发展的有效路径，取得了显著成效。</textarea>
          </div>
          <div class="form-group">
            <label class="form-label">成员校列表</label>
            <div style="background: var(--neutral-100); padding: 16px; border-radius: 8px;">
              <p style="margin-bottom: 8px;">1. 董家河镇中心小学（城镇）</p>
              <p style="margin-bottom: 8px;">2. 绿之风希望小学（乡村）</p>
              <p style="margin-bottom: 8px;">3. 白雀园镇中心小学（乡村）</p>
              <p style="margin-bottom: 8px;">4. 泼陂河镇第一小学（乡村）</p>
              <p>5. 龙山乡中心小学（乡村）</p>
            </div>
            <p style="font-size: 12px; color: var(--neutral-500); margin-top: 8px;">如需修改成员校请联系平台管理员</p>
          </div>
          <div class="form-group">
            <label class="form-label">封面图片</label>
            <div class="file-upload-area" onclick="document.getElementById('introCover').click()">
              <input type="file" id="introCover" style="display: none;" accept="image/*">
              <div class="file-upload-icon">🖼️</div>
              <div class="file-upload-text">点击上传封面图</div>
              <div class="file-upload-hint">建议尺寸：1200×400，支持 JPG、PNG 格式</div>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn btn-outline" onclick="closeIntroModal()">取消</button>
        <button class="btn btn-primary" onclick="saveIntro()">保存</button>
      </div>
    </div>
  </div>

  <script>
    function showSection(section) {
      const sectionNames = {
        'intro': '校共体介绍',
        'progress': '项目进展',
        'report': '月报管理',
        'resource': '资源成果',
        'profile': '账号设置'
      };
      showToast('正在加载：' + (sectionNames[section] || section));
    }

    // Progress Modal
    function openProgressModal() {
      document.getElementById('progressForm').reset();
      document.getElementById('progressModal').classList.add('active');
    }

    function closeProgressModal() {
      document.getElementById('progressModal').classList.remove('active');
    }

    function saveProgress() {
      const title = document.getElementById('progressTitle').value;
      const content = document.getElementById('progressContent').value;
      if (!title || !content) {
        alert('请填写必填项');
        return;
      }
      showToast('项目进展发布成功！');
      closeProgressModal();
    }

    // Resource Modal
    function openResourceModal() {
      document.getElementById('resourceForm').reset();
      document.getElementById('resourceModal').classList.add('active');
    }

    function closeResourceModal() {
      document.getElementById('resourceModal').classList.remove('active');
    }

    function saveResource() {
      const name = document.getElementById('resourceName').value;
      const type = document.getElementById('resourceType').value;
      const subject = document.getElementById('resourceSubject').value;
      if (!name || !type || !subject) {
        alert('请填写必填项');
        return;
      }
      showToast('资源上传成功，等待审核！');
      closeResourceModal();
    }

    // Report Modal
    function openReportModal() {
      document.getElementById('reportForm').reset();
      document.getElementById('reportModal').classList.add('active');
    }

    function closeReportModal() {
      document.getElementById('reportModal').classList.remove('active');
    }

    function submitReport() {
      const month = document.getElementById('reportMonth').value;
      if (!month) {
        alert('请选择月份');
        return;
      }
      showToast('月报提交成功！');
      closeReportModal();
    }

    // Intro Modal
    function openIntroModal() {
      document.getElementById('introModal').classList.add('active');
    }

    function closeIntroModal() {
      document.getElementById('introModal').classList.remove('active');
    }

    function saveIntro() {
      const content = document.getElementById('introContent').value;
      if (!content) {
        alert('请填写共同体简介');
        return;
      }
      showToast('校共体介绍更新成功！');
      closeIntroModal();
    }

    function showToast(message) {
      const toast = document.createElement('div');
      toast.className = 'toast';
      toast.textContent = message;
      document.body.appendChild(toast);
      setTimeout(() => toast.classList.add('show'), 10);
      setTimeout(() => {
        toast.classList.remove('show');
        setTimeout(() => toast.remove(), 300);
      }, 2000);
    }
  </script>
</body>
</html>
